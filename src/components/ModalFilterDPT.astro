---
import Button from "./ui/Button.astro";
interface Props {
    formAction?: string;
    hasil?: boolean;
}

const { formAction, hasil = false } = Astro.props;
---

<div class="modal modal--sm modal--1 fade" id="modal-filter" role="dialog" aria-labelledby="modal-loginLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="sticky bg-white rounded-t-xl items-center border-b border-b-skin-line flex gap-4 h-16 px-4 py-3 right-0 top-0 w-full z-20"> 
                <button data-dismiss="modal"> 
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8.56495 6.99909L13.3381 2.23635C13.5471 2.0273 13.6646 1.74376 13.6646 1.44811C13.6646 1.15247 13.5471 0.868928 13.3381 0.659873C13.1291 0.450819 12.8456 0.333374 12.55 0.333374C12.2544 0.333374 11.9709 0.450819 11.7619 0.659873L6.9998 5.43372L2.23773 0.659873C2.02871 0.450819 1.74521 0.333374 1.4496 0.333374C1.154 0.333374 0.870502 0.450819 0.661477 0.659873C0.452453 0.868928 0.335024 1.15247 0.335024 1.44811C0.335024 1.74376 0.452453 2.0273 0.661477 2.23635L5.43464 6.99909L0.661477 11.7618C0.557435 11.865 0.474855 11.9878 0.4185 12.1231C0.362145 12.2584 0.33313 12.4035 0.33313 12.5501C0.33313 12.6966 0.362145 12.8417 0.4185 12.977C0.474855 13.1123 0.557435 13.2351 0.661477 13.3383C0.76467 13.4424 0.887441 13.525 1.02271 13.5813C1.15798 13.6377 1.30307 13.6667 1.4496 13.6667C1.59614 13.6667 1.74123 13.6377 1.8765 13.5813C2.01177 13.525 2.13454 13.4424 2.23773 13.3383L6.9998 8.56447L11.7619 13.3383C11.8651 13.4424 11.9878 13.525 12.1231 13.5813C12.2584 13.6377 12.4034 13.6667 12.55 13.6667C12.6965 13.6667 12.8416 13.6377 12.9769 13.5813C13.1122 13.525 13.2349 13.4424 13.3381 13.3383C13.4422 13.2351 13.5247 13.1123 13.5811 12.977C13.6374 12.8417 13.6665 12.6966 13.6665 12.5501C13.6665 12.4035 13.6374 12.2584 13.5811 12.1231C13.5247 11.9878 13.4422 11.865 13.3381 11.7618L8.56495 6.99909Z" fill="#757E92"/>
                    </svg>                            
                </button> 
                <h3 class="w-full text-base font-bold inline-block line-clamp-1">Filter</h3>
            </div>
            
            <div class="modal-body">
                
                <div class="modal-body__content">
                    <form action={formAction} method="post" class="grid gap-5 mt-2">

                        { hasil === true ?
                          <div>
                            <label for="kab" class="block text-xs leading-6">Kabupaten</label>
                            <div class="mt-1 relative">
                                <select id="kab" class="select-filter select-opt form-element" data-placeholder="Pilih Kabupaten" name="kab">
                                    <option></option>
                                    <option value="Kabupaten A">Kabupaten A</option>
                                    <option value="Kabupaten B">Kabupaten B</option>
                                    <option value="Kabupaten C">Kabupaten C</option>
                                    <option value="Kabupaten D">Kabupaten D</option>
                                    <option value="Kabupaten E">Kabupaten E</option>
                                    <option value="Kabupaten F">Kabupaten F</option>
                                    <option value="Kabupaten G">Kabupaten G</option>
                                </select>
                            </div>
                          </div> : null
                        }

                        <div>
                            <label for="kec" class="block text-xs leading-6">Kecamatan</label>
                            <div class="mt-1 relative">
                                <select id="kec" class="select-filter select-opt form-element" data-placeholder="Pilih Kecamatan" name="kec">
                                    <option></option>
                                    <option value="Kecamatan A">Kecamatan A</option>
                                    <option value="Kecamatan B">Kecamatan B</option>
                                    <option value="Kecamatan C">Kecamatan C</option>
                                    <option value="Kecamatan D">Kecamatan D</option>
                                    <option value="Kecamatan E">Kecamatan E</option>
                                    <option value="Kecamatan F">Kecamatan F</option>
                                    <option value="Kecamatan G">Kecamatan G</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label for="kel" class="block text-xs leading-6">Desa/Kelurahan</label>
                            <div class="mt-1 relative">
                                <select id="kel" class="select-filter select-opt form-element" data-placeholder="Pilih Desa/Kelurahan" name="kel">
                                    <option></option>
                                    <option value="Kelurahan A">Kelurahan A</option>
                                    <option value="Kelurahan B">Kelurahan B</option>
                                    <option value="Kelurahan C">Kelurahan C</option>
                                    <option value="Kelurahan D">Kelurahan D</option>
                                    <option value="Kelurahan E">Kelurahan E</option>
                                    <option value="Kelurahan F">Kelurahan F</option>
                                    <option value="Kelurahan G">Kelurahan G</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label for="tps" class="block text-xs leading-6">TPS</label>
                            <div class="mt-1 relative">
                                <select id="tps" class="select-filter select-opt form-element" data-placeholder="Pilih TPS" name="tps">
                                    <option></option>
                                    <option value="TPS A">TPS A</option>
                                    <option value="TPS B">TPS B</option>
                                    <option value="TPS C">TPS C</option>
                                    <option value="TPS D">TPS D</option>
                                    <option value="TPS E">TPS E</option>
                                    <option value="TPS F">TPS F</option>
                                    <option value="TPS G">TPS G</option>
                                </select>
                            </div>
                        </div>
                        <div class="my-3 w-full">
                            <Button isButton={true} className="w-full" type="submit" id="form_filter" disabled>Terapkan</Button>
                        </div>
                        
                    </form>
                </div>
            
            </div>
        </div>
    </div>
</div>

<style is:global>
    .modal-open,
    .modal-keep-last {
        overflow: hidden !important;
    }
    .modal {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: 8;
        display: none;
        overflow: hidden;
        outline: 0;
        &--2 {
            z-index: 10 !important;
        }
        &--3 {
            z-index: 11 !important;
        }
    }
    .modal-open .modal,
    .modal-keep-last .modal {
        overflow-x: hidden;
        overflow-y: auto;
    }
    .modal.fade .modal-dialog {
        @apply transition-transform ease-in-out duration-300 translate-y-1/2;
    }
    .modal.show .modal-dialog {
        @apply translate-y-0;
    }
    .modal-backdrop {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: 7;
        @apply bg-black;
        &:nth-child(2) {
            z-index: 9;
        }
        &:nth-child(3) {
            z-index: 10;
        }
    }
    .modal-backdrop {
        
    }
    .fade {
        @apply opacity-0 transition-opacity ease-in-out duration-200;
    }
    .fade.show {
        @apply opacity-100;
    }
    .modal-backdrop.fade {
        opacity: 0;
    }
    .modal-backdrop.show {
        opacity: 0.7;
    }

    /*MODAL STYLE*/
    .modal-dialog {
        pointer-events: none;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-align: center;
        align-items: flex-end;
        transform: translate(0, 50%);
        min-height: 100%;
        margin: 0;
        @apply transition duration-100 w-full;
        .modal--full & {
            max-width: 100%;
            flex-direction: column;
            margin: 0;
            align-items: flex-start;
        }
    }
    .modal-content {
        position: relative;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-direction: column;
        flex-direction: column;
        @apply mx-auto w-full max-w-[480px];
        pointer-events: auto;
        @apply bg-white rounded-t-xl;
        .modal--full & {
            flex: 1;
        }
    }
    .modal-body {
        overflow-y: scroll;
        -webkit-overflow-scrolling: touch;
        &__title {
            padding: 16px 45px 16px 24px;
            margin-top: -24px;
            border-bottom: 1px solid #ddd;
            background: transparent;
            position: sticky;
            top: -21px;
            z-index: 2;
        }
        &__content {
            @apply p-4;
        }
        &__footer {
            padding: 0 24px 24px;
        }
    }
</style>

<script type="text/javascript" src="js/modalbox.js"></script>

<script type="text/javascript" >
  $('.select-filter').on("change", function(e) {
      e.preventDefault();
      if($("#tps").val()){
        $("#form_filter").prop("disabled", false);
      } else {
        $("#form_filter").prop("disabled", true);
      }
    });
</script>